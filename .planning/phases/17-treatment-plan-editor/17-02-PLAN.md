---
phase: 17-treatment-plan-editor
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/provider/treatment-editor/lifestyle-editor.tsx
  - src/components/provider/treatment-editor/nutrition-editor.tsx
  - src/components/provider/treatment-editor/training-editor.tsx
  - src/components/provider/treatment-editor/prescriptions-editor.tsx
  - src/components/provider/treatment-editor/peptides-editor.tsx
  - src/components/provider/treatment-editor/supplements-editor.tsx
autonomous: true
---

<objective>
Create form editor components for all 6 treatment plan sections.

Purpose: Enable providers to edit each section of a treatment plan with proper form validation and user-friendly interfaces.
Output: 6 reusable editor components for lifestyle, nutrition, training, prescriptions, peptides, and supplements.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/types/treatment-plan.ts
@src/components/treatment-plan/lifestyle-section.tsx
@src/components/treatment-plan/nutrition-section.tsx
@src/components/treatment-plan/training-section.tsx
@src/components/treatment-plan/medication-item.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Lifestyle, Nutrition, and Training editor components</name>
  <files>src/components/provider/treatment-editor/lifestyle-editor.tsx, src/components/provider/treatment-editor/nutrition-editor.tsx, src/components/provider/treatment-editor/training-editor.tsx</files>
  <action>
Create 3 client components with forms for non-medication sections.

**LifestyleEditor** (`lifestyle-editor.tsx`):
- Props: `data: LifestyleData | null`, `onChange: (data: LifestyleData) => void`
- Form fields for:
  - Sleep recommendation (textarea) + notes (textarea)
  - Stress recommendation (textarea) + notes (textarea)
  - Habits (array of recommendations with add/remove buttons)
  - General notes (textarea)
- Use shadcn/ui Card, Label, Textarea, Button components
- Call onChange when any field changes (controlled form)

**NutritionEditor** (`nutrition-editor.tsx`):
- Props: `data: NutritionData | null`, `onChange: (data: NutritionData) => void`
- Form fields for:
  - Macro targets: calories, protein, carbs, fat (Input type="number")
  - Guidelines (array of strings with add/remove)
  - Restrictions (array of strings with add/remove)
  - General notes (textarea)
- Display macro inputs in a 2x2 grid on desktop

**TrainingEditor** (`training-editor.tsx`):
- Props: `data: TrainingData | null`, `onChange: (data: TrainingData) => void`
- Form fields for:
  - Frequency (input text, e.g., "4x per week")
  - Focus areas (array of strings with add/remove, e.g., "Upper body", "Core")
  - Exercises (array with name, sets, reps, notes - use Card for each)
  - General notes (textarea)

All components:
- Mark "use client"
- Import types from @/types/treatment-plan
- Use shadcn/ui components: Card, CardContent, CardHeader, CardTitle, Label, Input, Textarea, Button
- Use Lucide icons: Plus, Trash2 for add/remove
- Handle null data gracefully (initialize with defaults)
  </action>
  <verify>TypeScript compiles: npx tsc --noEmit</verify>
  <done>3 editor components created for lifestyle, nutrition, training sections</done>
</task>

<task type="auto">
  <name>Task 2: Create Prescriptions, Peptides, and Supplements editor components</name>
  <files>src/components/provider/treatment-editor/prescriptions-editor.tsx, src/components/provider/treatment-editor/peptides-editor.tsx, src/components/provider/treatment-editor/supplements-editor.tsx</files>
  <action>
Create 3 client components for medication sections (similar structure, different fields).

**PrescriptionsEditor** (`prescriptions-editor.tsx`):
- Props: `data: PrescriptionItem[] | null`, `onChange: (data: PrescriptionItem[]) => void`
- Display list of prescription cards, each with:
  - Name (input, required)
  - Dosage (input, required)
  - Frequency (input, e.g., "once daily")
  - Timing (Select with options: morning, evening, with_food, before_bed, as_directed)
  - Instructions (textarea, optional)
  - Start Date (input date, optional)
  - Remove button
- Add new prescription button at bottom
- Empty state when no prescriptions

**PeptidesEditor** (`peptides-editor.tsx`):
- Props: `data: PeptideItem[] | null`, `onChange: (data: PeptideItem[]) => void`
- Same structure as prescriptions, but fields:
  - Name, Dosage, Frequency, Timing
  - Injection Site (input, e.g., "Subcutaneous abdomen")
  - Instructions
  - Remove button

**SupplementsEditor** (`supplements-editor.tsx`):
- Props: `data: SupplementItem[] | null`, `onChange: (data: SupplementItem[]) => void`
- Same structure as prescriptions, but fields:
  - Name, Dosage, Frequency, Timing
  - Brand (input, optional)
  - Instructions
  - Remove button

All medication editors:
- Mark "use client"
- Use Card component for each item
- Include timing Select with MedicationTiming options
- Add/Remove buttons with Plus/Trash2 icons
- Initialize with empty array if data is null
  </action>
  <verify>TypeScript compiles: npx tsc --noEmit</verify>
  <done>3 medication editor components created with add/remove functionality</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] All 6 editor components export correctly
- [ ] Form fields match TypeScript types
- [ ] Add/remove functionality works for array fields
</verification>

<success_criteria>
- All tasks completed
- 6 editor components created matching treatment plan sections
- Components are controlled (receive data, call onChange)
- Consistent UI patterns across all editors
</success_criteria>

<output>
After completion, create `.planning/phases/17-treatment-plan-editor/17-02-SUMMARY.md`
</output>
